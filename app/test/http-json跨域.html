<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <script src="../lib/js/jquery.js"></script>
</head>
<body>

<p>
    淘宝查询商品价格接口：http://suggest.taobao.com/sug?code=utf-8&q=商品关键字
</p>

</body>
<script>

//------原声跨域-------//
//会在页面动态创建一个script  一直在页面显示

    var url="http://suggest.taobao.com/sug?code=utf-8&q=iphone&callback=test";
    function kuayu(url){
        var ele=document.createElement("script");
        ele.type="text/javascript";
        ele.src=url;
        document.getElementsByTagName("head")[0].appendChild(ele)
    }
    kuayu(url);

    function test(res){//test就是callback返回的自定义函数可是说随便一个名字
        console.log(res);
    }

///------ajax跨域------////
//会在先页面动态创建一个script然后接受到数据后立马删除 最终不会在页面显示

    $.ajax({
        type:"get",
        url:url,
        dataType:'jsonp',
        jsonp:"callback",
        success:function(data){
            console.log(data)
        },
        error:function(data){
            console.log("error")
        }
    });
    $.ajax({//这个就会报错说不允许
        type:"get",
        url:"http://suggest.taobao.com/sug?code=utf-8&q=iphone",
        success:function(data){
            console.log(data)
        },
        error:function(data){
            console.log("error")
        }
    })

</script>
</html>